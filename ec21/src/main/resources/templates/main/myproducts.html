<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<!-- Meta Tag -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name='copyright' content=''>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Title Tag  -->
	<title>EC21, Global B2B Marketplace</title> 
	<!-- Favicon -->
	<link rel="icon" type="image/png" th:href="@{/main/images/ec21logo.png}">
	<!-- Web Font -->
	<link
		href="https://fonts.googleapis.com/css?family=Poppins:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap"
		rel="stylesheet">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR&display=swap" rel="stylesheet">

	<!-- StyleSheet -->

	<!-- Bootstrap -->
	<link rel="stylesheet" th:href="@{/main/css/bootstrap.css}">
	<!-- Magnific Popup -->
	<link rel="stylesheet" th:href="@{/main/css/magnific-popup.min.css}">
	<!-- Font Awesome -->
	<link rel="stylesheet" th:href="@{/main/css/font-awesome.css}">
	<!-- Fancybox -->
	<link rel="stylesheet" th:href="@{/main/css/fancybox.css}">
	<!-- Themify Icons -->
	<link rel="stylesheet" th:href="@{/main/css/themify-icons.css}">
	<!-- Nice Select CSS -->
	<link rel="stylesheet" th:href="@{/main/css/niceselect.css}">
	<!-- Animate CSS -->
	<link rel="stylesheet" th:href="@{/main/css/animate.css}">
	<!-- Flex Slider CSS -->
	<link rel="stylesheet" th:href="@{/main/css/flex-slider.min.css}">
	<!-- Owl Carousel -->
	<link rel="stylesheet" th:href="@{/main/css/owl-carousel.css}">
	<!-- Slicknav -->
	<link rel="stylesheet" th:href="@{/main/css/slicknav.min.css}">

	<!-- Eshop StyleSheet -->
	<link rel="stylesheet" th:href="@{/main/css/reset.css}">
	<link rel="stylesheet" th:href="@{/main/css/style.css}">
	<link rel="stylesheet" th:href="@{/main/css/responsive.css}">

	<!-- Color CSS -->
	<link rel="stylesheet" th:href="@{/main/css/color/color2.css}">


	<!-- 240420 dy : JQuery 파일 추가 및 ajax 작업 -->
	<script th:src="@{/script/jquery-3.7.1.min.js}"></script>
	<script>
		// 삭제 버튼 클릭 시 확인
		function confirmDelete(element, event) {
			let productName = element.getAttribute("data-name");
			// 'confirm' 대화상자로 사용자 확인 받기
			var result = confirm(`상품명 : ${productName}\n▷ 정말 삭제하시겠습니까?`);
			if (!result) {
				// 사용자가 '취소'를 선택한 경우, 링크 동작 중지
				event.preventDefault();
				return false;
			}
			// 사용자가 '확인'을 선택한 경우, 링크 동작 계속 (기본 동작 허용)
			return true;
		}

	</script>

</head>

<body class="js">

	<input type="hidden" name="customerId" id="customerId" th:value="${#authentication.name}">
	
	<!-- Preloader -->
	<!-- <div class="preloader">
		<div class="preloader-inner">
			<div class="preloader-icon">
				<span></span>
				<span></span>
			</div>
		</div>
	</div> -->
	<!-- End Preloader -->

	<!-- Header -->
	<header class="header shop">
		<!-- Topbar -->
		<div class="topbar">
			<div class="container">
				<div class="row">
					<div class="col-lg-4 col-md-12 col-12">
						<!-- Top Left -->
						<div class="top-left">
							<!-- logo -->
							<div class="logo">
								<a th:href="@{/}">
									<img th:src="@{/main/images/ec21logo.png}" alt="logo" style="width: 100px; height: 30px;">
								</a>
							</div>
						</div>
						<!--/ End Top Left -->
					</div>
					<div class="col-lg-8 col-md-12 col-12">
						<!-- Top Right -->
						<div class="right-content">
							<ul class="list-main">
								<li sec:authorize="isAnonymous()"><i class="ti-power-off"></i><a th:href="@{/main/login}">Login</a></li>
								<li sec:authorize="isAnonymous()"><i class="ti-user"></i><a th:href="@{/main/register}">Sign up</a></li>
								<li sec:authorize="isAuthenticated()"><i class="ti-power-off"></i><a th:href="@{/main/logout}">Logout</a></li>
								<li><a th:href="@{/main/myproducts(customerId=${#authentication.name})}"><i class="fa fa-user-circle-o" aria-hidden="true"></i>
									<span sec:authorize="isAuthenticated()">[[${#authentication.name}]]</span></a></li>
								<li><a th:href="@{/main/inbox(customerId=${#authentication.name})}" class="single-icon">
										<i class="fa fa-envelope-o"></i><span class="total-count"></span></li>
							</ul>
						</div>
						<!-- End Top Right -->
					</div>
				</div>
			</div>
		</div>
		<!-- End Topbar -->
	</header>

	<!-- Breadcrumbs -->
	<div class="breadcrumbs">
		<div class="container">
			<div class="row">
				<div class="col-12">
					<div class="notice">
						<h4><i class="fa fa-check"> NOTICE</i></h4>
						<span>Posts that do not align with the purpose of this board may be restricted from being displayed and can be deleted without prior notice.</span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- End Breadcrumbs -->

	<!-- 내 상품 목록 -->
	<section class="product shop section" style="min-height: 100vh;">
		<div class="container">
			<div class="row">
				<div class="col-lg-2 col-12 ">
						<div id="accordion">
							<div class="card">
								<div class="card-header">
									<a class="card-link" data-toggle="collapse" href="#account-category">My Account</a>
								</div>
								<div id="account-category" class="collapse show" data-parent="#accordion">
									<div class="card-body">
										<ul class="categor-list">
											<li><a th:href="@{/main/myinfo(customerId=${#authentication.name})}">My Information</a></li>
											<li><a th:href="@{/main/myproducts(customerId=${#authentication.name})}">My Products</a></li>
											<li><a th:href="@{/main/productsWrite(customerId=${#authentication.name})}">Add A New</a></li>
										</ul>
									</div>
								</div>
							</div>
							<div class="card">
								<div class="card-header">
								<a class="collapsed card-link" data-toggle="collapse" href="#product-category">To Product</a>
							</div>
							<div id="product-category" class="collapse" data-parent="#accordion">
								<div class="card-body">
									<ul class="categor-list">
										<li><a th:href="@{/main/list(category=total)}">All</a></li>
										<li><a th:href="@{/main/list(category=FOOD_BEVERAGE)}">Food & Beverage</a></li>
										<li><a th:href="@{/main/list(category=CHEMICAL)}">Chemical</a></li>
										<li><a th:href="@{/main/list(category=HEALTH_MEDICAL)}">Health & Medical</a></li>
										<li><a th:href="@{/main/list(category=ELECTRONIC)}">Electronics</a></li>
										<li><a th:href="@{/main/list(category=COSMETIC)}">Cosmetic</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>		

				<!-- 올린 상품 리스트 -->
				<div class="col-lg-10 col-12">
					<table class="table shopping-summery" id="result">
						<thead>
							<tr class="main-hading">
								<th>no</th>
								<th class="product-title">PRODUCT</th>
								<th>PRICE</th> <!--가격 -->
								<th>QUANTITY</th> <!-- 단위-->
								<th>DATE</th>
								<th><i class="ti-trash remove-icon"></i></th>
							</tr>
						</thead>
						<tbody>
							<!-- 240418 dy : 회원의 상품 목록 출력 -->
							<tr th:if="${productList != null and !#lists.isEmpty(productList)}" th:each="product, i : ${productList}">
								<td class="product-img" style="width: 14%;">
									<!-- 예시 사진 -->
									<span class="image" th:if="${product.originalFileName}!=null">
										<img th:src="@{/main/downloadImg(productId=${product.productId})}">
									</span>
									<span th:unless="${product.originalFileName}!=null">
										<!-- 인덱스와 동일함 -->
										<img class="default-img" src="https://via.placeholder.com/550x750"
											alt="#">
									</span>
								</td>
								<td class="product-info" data-title="Description">
									<span class="product-name">
										<a th:href="@{/main/productsDetail(productId=${product.productId},currentPage='myproducts')}">[[${product.productName}]]</a>
									</span>
									<span class="product-desc"><a th:utext="${product.productDesc}" th:href="@{/main/productsDetail(productId=${product.productId},currentPage='myproducts')}"></a></span>
								</td>
								<td class="price" data-title="Price">
									<span>$[[${product.price}]]</span>
								</td>
								<td class="qty" data-title="Qty">
									<span th:if="${product.moq >= 1000}" th:text="${#numbers.formatInteger(product.moq, 3, 'COMMA')} + ' ' + ${product.unit}"> </span>
									<span th:unless="${product.moq >= 1000}" th:text="${product.moq} + ' ' + ${product.unit}"></span>
								</td>
								<td class="createDate" data-title="date">
									<span>[[${#temporals.format(product.createDate, 'yyyy-MM-dd')}]]</span>
								</td>
								<td class="action" data-title="Remove">
									<a onclick="return confirmDelete(this, event)" 
										th:href="@{/main/myproducts/delete(productId=${product.productId},customerId=${customerId})}"
										class="deleteBtn" th:data-name="${product.productName}">
										<i class="ti-trash remove-icon"></i>
									</a>
								</td>
							</tr>
						</tbody>
					</table> 
					<!--/ End Shopping Summery -->				
				</div>
			</div>
		</div>
	</section>
	
	<!-- Start Footer Area -->
	<footer class="footer">
		<!-- Footer Top -->
		<div class="footer-top section">
			<div class="container">
				<div class="row">
					<div class="col-lg-2 col-md-6 col-12">
						<!-- Single Widget -->
						<div class="single-footer links">
							<h4>About Us</h4>
							<ul>
								<li><a href="#">Company Overview</a></li>
								<li><a href="#">Agent Program</a></li>
								<li><a href="#">Advertise with us</a></li>
							</ul>
						</div>
						<!-- End Single Widget -->
					</div>
					<div class="col-lg-2 col-md-6 col-12">
						<!-- Single Widget -->
						<div class="single-footer links">
							<h4>Buying on EC21</h4>
							<ul>
								<li><a href="#">Post Buying Leads</a></li>
								<li><a href="#">Browse Category</a></li>
								<li><a href="#">Products by Keywords</a></li>
								<li><a href="#">Products by Country</a></li>
								<li><a href="#">Idea Products</a></li>
							</ul>
						</div>
						<!-- End Single Widget -->
					</div>

					<!-- Single Widget -->
					<div class="col-lg-2 col-md-6 col-12">
						<!-- Single Widget -->
						<div class="single-footer links">
							<h4>Selling on EC21</h4>
							<ul>
								<li><a href="#">Post Products</a></li>
								<li><a href="#">Manage Products</a></li>
								<li><a href="#">Post Selling Leads</a></li>
								<li><a href="#">Search Buying Leads</a></li>
								<li><a href="#">Search Buyer Data</a></li>
							</ul>
						</div>
						<!-- End Single Widget -->
					</div>
					<div class="col-lg-2 col-md-6 col-12">
						<!-- Single Widget -->
						<div class="single-footer links">
							<h4>Services</h4>
							<ul>
								<li><a href="#">Basic Services</a></li>
								<li><a href="#">Trade PRO</a></li>
								<li><a href="#">Trade OK</a></li>
								<li><a href="#">Credit Reports</a></li>
								<li><a href="#">TradeVerify</a></li>
							</ul>
						</div>
					</div>
					<!-- End Single Widget -->
					<div class="col-lg-3 col-md-6 col-12">
						<!-- Single Widget -->
						<div class="single-footer social">
							<h4>Share this page</h4>
							<ul>
								<li><a href="#"><i class="ti-facebook"></i></a></li>
								<li><a href="#"><i class="ti-twitter"></i></a></li>
								<li><a href="#"><i class="ti-flickr"></i></a></li>
								<li><a href="#"><i class="ti-instagram"></i></a></li>
							</ul>
						</div>
						<!-- End Single Widget -->
					</div>
				</div>
			</div>
		</div>
		<!-- End Footer Top -->
		
		<div class="copyright">
			<div class="container">
				<div class="inner">
					<div class="row">
						<div class="col-lg-6 col-12">
							<div class="left">
								<p>Copyright © 1997-2024 <a href="#" target="_blank">EC21 Inc.</a> All Rights Reserved.
									EC21 in Korean | Chinese Business Registry Number: 120-86-03931</p>
							</div>
						</div>
						<div class="col-lg-6 col-12">
							<div class="right">
								<img th:src="@{/main/images/payments.png}" alt="#">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</footer>
	<!-- /End Footer Area -->

	<!-- Jquery -->
	<script th:src="@{/main/js/jquery.min.js}"></script>
	<script th:src="@{/main/js/jquery-migrate-3.0.0.js}"></script>
	<script th:src="@{/main/js/jquery-ui.min.js}"></script>
	<!-- Popper JS -->
	<script th:src="@{/main/js/popper.min.js}"></script>
	<!-- Bootstrap JS -->
	<script th:src="@{/main/js/bootstrap.min.js}"></script>
	<!-- Color JS -->
	<script th:src="@{/main/js/colors.js}"></script>
	<!-- Slicknav JS -->
	<script th:src="@{/main/js/slicknav.min.js}"></script>
	<!-- Owl Carousel JS -->
	<script th:src="@{/main/js/owl-carousel.js}"></script>
	<!-- Magnific Popup JS -->
	<script th:src="@{/main/js/magnific-popup.js}"></script>
	<!-- Fancybox JS -->
	<script th:src="@{/main/js/facnybox.min.js}"></script>
	<!-- Waypoints JS -->
	<script th:src="@{/main/js/waypoints.min.js}"></script>
	<!-- Countdown JS -->
	<script th:src="@{/main/js/finalcountdown.min.js}"></script>
	<!-- Nice Select JS -->
	<script th:src="@{/main/js/nicesellect.js}"></script>
	<!-- Ytplayer JS -->
	<!-- <script th:src="@{/main/js/ytplayer.min.js}"></script> -->
	<!-- Flex Slider JS -->
	<script th:src="@{/main/js/flex-slider.js}"></script>
	<!-- ScrollUp JS -->
	<script th:src="@{/main/js/scrollup.js}"></script>
	<!-- Onepage Nav JS -->
	<script th:src="@{/main/js/onepage-nav.min.js}"></script>
	<!-- Easing JS -->
	<script th:src="@{/main/js/easing.js}"></script>
	<!-- Active JS -->
	<script th:src="@{/main/js/active.js}"></script>
</body>

</html>